<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>DQ2ローレシア王子 | ドラゴンクエストI・II HD-2D 非公式メモ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    line-height: 1.6;
    max-width: 960px;
    margin: 0 auto;
    padding: 16px;
    background: #111;
    color: #f5f5f5;
  }
  a {
    color: #7fd1ff;
  }
  header, nav {
    margin-bottom: 16px;
  }
  h1 {
    font-size: 1.6rem;
    margin-bottom: 0.5rem;
    border-bottom: 1px solid #444;
    padding-bottom: 0.3rem;
  }
  h2 {
    font-size: 1.2rem;
    margin-top: 1.8rem;
    border-left: 4px solid #7fd1ff;
    padding-left: 0.5rem;
  }
  p.note {
    font-size: 0.9rem;
    color: #ccc;
  }
  table {
    border-collapse: collapse;
    width: 100%;
    margin-top: 0.5rem;
    font-size: 0.9rem;
  }
  th, td {
    border: 1px solid #444;
    padding: 4px 6px;
    text-align: left;
    white-space: nowrap;
  }
  th {
    background: #222;
  }
  tbody tr:nth-child(odd) {
    background: #181818;
  }
  tbody tr:nth-child(even) {
    background: #151515;
  }
  .small {
    font-size: 0.85rem;
  }
  .back-links {
    margin-bottom: 8px;
  }
  .back-links a {
    margin-right: 8px;
  }
</style>

  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body>
  <nav class="back-links">
    <a href="./index.html">← トップページに戻る</a>
    <a href="./dq_character.html">← キャラクター情報に戻る</a>
  </nav>

  <header>
    <h1>DQ2ローレシア王子</h1>
  </header>

  <main>
    <section id="initial-stats-section">
      <h2>初期ステータス（HD-2D版）</h2>
      <p class="note">
        dq_Initial value.csv の内容を元にした初期レベル＆能力値です。<br>
        ※HP・MPはCSVに含めていませんが、目安として「HPはたいりょくの2倍」「MPはかしこさの2倍」と考えてください。
      </p>
      <table id="initial-stats-table">
        <thead>
          <tr>
            <th>キャラ名</th>
            <th>初期Lv</th>
            <th>ちから</th>
            <th>みのまもり</th>
            <th>すばやさ</th>
            <th>たいりょく</th>
            <th>かしこさ</th>
            <th>うんのよさ</th>
          </tr>
        </thead>
        <tbody>
          <tr><td colspan="8">読み込み中...</td></tr>
        </tbody>
      </table>
    </section>

    <section id="exp-table-section">
      <h2>レベル別経験値（DQ2）</h2>
      <p class="note">
        dq2_experience value table.csv を元にした経験値テーブルです。<br>
        「累計経験値」はそのレベル到達までの合計値、「次レベルまで」は次のレベルに必要な経験値を表します。<br>
        ※加入レベルのキャラは「加入時」と表記しています。
      </p>
      <table id="exp-table">
        <thead>
          <tr>
            <th>Lv</th>
            <th>累計経験値</th>
            <th>次レベルまで</th>
          </tr>
        </thead>
        <tbody>
          <tr><td colspan="3">読み込み中...</td></tr>
        </tbody>
      </table>
    </section>

    <section id="skills-section">
      <h2>習得呪文・特技</h2>
      <table>
        <thead>
          <tr>
            <th>Lv</th>
            <th>習得呪文・特技</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>1</td><td>しっぷう突き、けもの突き、とびひざげり</td></tr>
          <tr><td>2</td><td>石つぶて</td></tr>
          <tr><td>7</td><td>ちからため</td></tr>
          <tr><td>9</td><td>かぶと割り</td></tr>
          <tr><td>13</td><td>必中拳</td></tr>
          <tr><td>16</td><td>もろば斬り</td></tr>
          <tr><td>18</td><td>ドラゴン斬り</td></tr>
          <tr><td>22</td><td>まじん斬り</td></tr>
          <tr><td>24</td><td>やいばくだき</td></tr>
          <tr><td>26</td><td>せいけん突き</td></tr>
          <tr><td>28</td><td>におうだち</td></tr>
          <tr><td>30</td><td>すてみ</td></tr>
          <tr><td>31</td><td>おうえん</td></tr>
          <tr><td>34</td><td>めいそう</td></tr>
          <tr><td>36</td><td>ばくれつけん</td></tr>
          <tr><td>38</td><td>ぶんまわし</td></tr>
          <tr><td>41</td><td>渾身斬り</td></tr>
        </tbody>
      </table>
    </section>
  </main>

  <script>
    const CHARACTER_CONFIG = {
      initialName: "DQ2ローレシア王子",
      expTotalColumn: "DQ2ローレシア王子",
      expNextColumn: "次レベルまで"
    };

    async function loadCsv(path) {
      const res = await fetch(path);
      if (!res.ok) throw new Error("CSV読み込み失敗: " + path);
      const text = await res.text();
      const parsed = Papa.parse(text, {
        header: true,
        skipEmptyLines: true,
      });
      return parsed.data;
    }

    function fillInitialStats(rows) {
      const tbody = document.querySelector("#initial-stats-table tbody");
      tbody.innerHTML = "";
      const row = rows.find(r => r["キャラ名"] === CHARACTER_CONFIG.initialName);
      if (!row) {
        const tr = document.createElement("tr");
        const td = document.createElement("td");
        td.colSpan = 8;
        td.textContent = "該当キャラの行が見つかりませんでした（CSVのキャラ名をご確認ください）。";
        tr.appendChild(td);
        tbody.appendChild(tr);
        return;
      }
      const tr = document.createElement("tr");
      function cell(key) {
        const td = document.createElement("td");
        td.textContent = row[key] ?? "";
        return td;
      }
      tr.appendChild(cell("キャラ名"));
      tr.appendChild(cell("初期レベル"));
      tr.appendChild(cell("ちから"));
      tr.appendChild(cell("みのまもり"));
      tr.appendChild(cell("すばやさ"));
      tr.appendChild(cell("たいりょく"));
      tr.appendChild(cell("かしこさ"));
      tr.appendChild(cell("うんのよさ"));
      tbody.appendChild(tr);
    }

    function fillExpTable(rows) {
      const tbody = document.querySelector("#exp-table tbody");
      tbody.innerHTML = "";
      for (const r of rows) {
        const level = r["レベル"];
        const total = r[CHARACTER_CONFIG.expTotalColumn];
        const next = r[CHARACTER_CONFIG.expNextColumn];
        if (!level || (total == null && next == null)) continue;

        const tr = document.createElement("tr");
        const tdLv = document.createElement("td");
        tdLv.textContent = level;
        tr.appendChild(tdLv);

        const tdTotal = document.createElement("td");
        tdTotal.textContent = total ?? "";
        tr.appendChild(tdTotal);

        const tdNext = document.createElement("td");
        tdNext.textContent = next ?? "";
        tr.appendChild(tdNext);

        tbody.appendChild(tr);
      }

      if (!tbody.hasChildNodes()) {
        const tr = document.createElement("tr");
        const td = document.createElement("td");
        td.colSpan = 3;
        td.textContent = "該当キャラの経験値データが見つかりませんでした。";
        tr.appendChild(td);
        tbody.appendChild(tr);
      }
    }

    (async function init() {
      try {
        const [initialRows, expRows] = await Promise.all([
          loadCsv("dq_Initial%20value.csv"),
          loadCsv("dq2_experience%20value%20table.csv"),
        ]);
        fillInitialStats(initialRows);
        fillExpTable(expRows);
      } catch (e) {
        console.error(e);
      }
    })();
  </script>
</body>
</html>
